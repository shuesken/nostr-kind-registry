import{S as te,i as ne,s as le,k as _,q as b,a as R,l as m,m as p,r as y,h as s,c as K,n as H,b as T,D as r,K as ae,u as U,C as J,P as re,J as Z,L as oe,e as z,p as O}from"../../../chunks/index-3d019132.js";import{g as se}from"../../../chunks/nostr-69e4a307.js";function $(o,e,l){const t=o.slice();return t[4]=e[l].relay,t[5]=e[l].eventPromise,t}function ce(o){let e;function l(a,i){return a[9]==="not checked yet"?fe:a[9]==="event not found"?he:a[9]==="timed out"?de:ie}let t=l(o),n=t(o);return{c(){n.c(),e=z()},l(a){n.l(a),e=z()},m(a,i){n.m(a,i),T(a,e,i)},p(a,i){t!==(t=l(a))&&(n.d(1),n=t(a),n&&(n.c(),n.m(e.parentNode,e)))},d(a){n.d(a),a&&s(e)}}}function ie(o){let e,l;return{c(){e=_("span"),l=b("errored"),this.h()},l(t){e=m(t,"SPAN",{style:!0});var n=p(e);l=y(n,"errored"),n.forEach(s),this.h()},h(){O(e,"color","orange")},m(t,n){T(t,e,n),r(e,l)},d(t){t&&s(e)}}}function de(o){let e,l;return{c(){e=_("span"),l=b("timed out"),this.h()},l(t){e=m(t,"SPAN",{style:!0});var n=p(e);l=y(n,"timed out"),n.forEach(s),this.h()},h(){O(e,"color","orange")},m(t,n){T(t,e,n),r(e,l)},d(t){t&&s(e)}}}function he(o){let e,l;return{c(){e=_("span"),l=b("event not found!"),this.h()},l(t){e=m(t,"SPAN",{style:!0});var n=p(e);l=y(n,"event not found!"),n.forEach(s),this.h()},h(){O(e,"color","green")},m(t,n){T(t,e,n),r(e,l)},d(t){t&&s(e)}}}function fe(o){let e,l;return{c(){e=_("span"),l=b("not checked yet")},l(t){e=m(t,"SPAN",{});var n=p(e);l=y(n,"not checked yet"),n.forEach(s)},m(t,n){T(t,e,n),r(e,l)},d(t){t&&s(e)}}}function ue(o){let e,l,t=o[8].id+"",n;return{c(){e=_("span"),l=b("oh no! found event "),n=b(t),this.h()},l(a){e=m(a,"SPAN",{style:!0});var i=p(e);l=y(i,"oh no! found event "),n=y(i,t),i.forEach(s),this.h()},h(){O(e,"color","red")},m(a,i){T(a,e,i),r(e,l),r(e,n)},p(a,i){i&2&&t!==(t=a[8].id+"")&&U(n,t)},d(a){a&&s(e)}}}function _e(o){let e,l;return{c(){e=_("span"),l=b("checking…")},l(t){e=m(t,"SPAN",{});var n=p(e);l=y(n,"checking…"),n.forEach(s)},m(t,n){T(t,e,n),r(e,l)},p:J,d(t){t&&s(e)}}}function ee(o){let e,l,t=o[4]+"",n,a,i,d,E,P,c={ctx:o,current:null,token:null,hasCatch:!0,pending:_e,then:ue,catch:ce,value:8,error:9};return Z(E=o[5],c),{c(){e=_("tr"),l=_("td"),n=b(t),a=b(":"),i=R(),d=_("td"),c.block.c(),P=R()},l(v){e=m(v,"TR",{});var h=p(e);l=m(h,"TD",{});var N=p(l);n=y(N,t),a=y(N,":"),N.forEach(s),i=K(h),d=m(h,"TD",{});var A=p(d);c.block.l(A),A.forEach(s),P=K(h),h.forEach(s)},m(v,h){T(v,e,h),r(e,l),r(l,n),r(l,a),r(e,i),r(e,d),c.block.m(d,c.anchor=null),c.mount=()=>d,c.anchor=null,r(e,P)},p(v,h){o=v,h&2&&t!==(t=o[4]+"")&&U(n,t),c.ctx=o,h&2&&E!==(E=o[5])&&Z(E,c)||oe(c,o,h)},d(v){v&&s(e),c.block.d(),c.token=null,c=null}}}function me(o){let e,l,t,n=o[0].randomKind+"",a,i,d,E,P,c,v,h,N,A,Y,q,S,L,V,C,j,x,D=o[1],k=[];for(let u=0;u<D.length;u+=1)k[u]=ee($(o,D,u));return{c(){e=_("div"),l=_("p"),t=b("Your random kind: "),a=b(n),i=R(),d=_("button"),E=b("Check It Now!"),P=R(),c=_("div"),v=_("table"),h=_("thead"),N=_("tr"),A=_("th"),Y=b("Relay"),q=R(),S=_("th"),L=b("Event status"),V=R(),C=_("tbody");for(let u=0;u<k.length;u+=1)k[u].c();this.h()},l(u){e=m(u,"DIV",{class:!0});var g=p(e);l=m(g,"P",{class:!0});var f=p(l);t=y(f,"Your random kind: "),a=y(f,n),f.forEach(s),i=K(g),d=m(g,"BUTTON",{class:!0});var w=p(d);E=y(w,"Check It Now!"),w.forEach(s),P=K(g),c=m(g,"DIV",{class:!0});var G=p(c);v=m(G,"TABLE",{});var I=p(v);h=m(I,"THEAD",{});var M=p(h);N=m(M,"TR",{});var B=p(N);A=m(B,"TH",{});var Q=p(A);Y=y(Q,"Relay"),Q.forEach(s),q=K(B),S=m(B,"TH",{});var W=p(S);L=y(W,"Event status"),W.forEach(s),B.forEach(s),M.forEach(s),V=K(I),C=m(I,"TBODY",{});var X=p(C);for(let F=0;F<k.length;F+=1)k[F].l(X);X.forEach(s),I.forEach(s),G.forEach(s),g.forEach(s),this.h()},h(){H(l,"class","mb-5"),H(d,"class","bg-slate-200 hover:bg-slate-300 rounded border p-2"),H(c,"class","mt-5"),H(e,"class","max-w-prose")},m(u,g){T(u,e,g),r(e,l),r(l,t),r(l,a),r(e,i),r(e,d),r(d,E),r(e,P),r(e,c),r(c,v),r(v,h),r(h,N),r(N,A),r(A,Y),r(N,q),r(N,S),r(S,L),r(v,V),r(v,C);for(let f=0;f<k.length;f+=1)k[f].m(C,null);j||(x=ae(d,"click",o[2]),j=!0)},p(u,[g]){if(g&1&&n!==(n=u[0].randomKind+"")&&U(a,n),g&2){D=u[1];let f;for(f=0;f<D.length;f+=1){const w=$(u,D,f);k[f]?k[f].p(w,g):(k[f]=ee(w),k[f].c(),k[f].m(C,null))}for(;f<k.length;f+=1)k[f].d(1);k.length=D.length}},i:J,o:J,d(u){u&&s(e),re(k,u),j=!1,x()}}}function pe(o,e,l){let{data:t}=e;function n(){i(t.randomKind,8)}const a=t.relays.map(d=>({relay:d,eventPromise:Promise.reject("not checked yet")}));async function i(d,E){const P=t.relays;let c=0;E>P.length&&(E=P.length);function v(){c>=P.length||(l(1,a[c].eventPromise=se(d,t.relays[c]),a),a[c].eventPromise.finally(()=>v()),c++)}for(let h=0;h<E;h++)v()}return o.$$set=d=>{"data"in d&&l(0,t=d.data)},[t,a,n]}class be extends te{constructor(e){super(),ne(this,e,pe,me,le,{data:0})}}export{be as default};
